### [译]什么是词法作用域

> [What is Lexical Scope?](https://stackoverflow.com/questions/1047454/what-is-lexical-scope)

#### 问题

有人可以给我一个关于词法作用域的简要介绍吗？

#### 高赞答案

我是通过例子来理解它们的.:)

首先，词法作用域（也被称为静态作用域），类似于C语言的语法：

```c
void fun()
{
    int x = 5;
    void fun2()
    {
        printf("%d", x);
    }
}
```

每个内部层都可以访问器外层。

还有另一种方法，通过Lisp语言首先实现的称为动态作用域，再次使用类似C语言的语法：

```c
void fun)() 
{
    printf("%d",x);
}
void dummy1()
{
    int x = 5;
    fun();
}
void dummy2(){
    int x = 10;
    fun();
}
```

在这里，`fun`可以访问`dummy1`或`dummy2`中的`x`，也可以访问任何调用`fun`的函数中声明的`x`。

`dummy1()`将会打印5，`dummy2()`将会打印10。

第一个称为静态，因为它可以在编译时推断出来，第二个称为动态，因为外部作用域是动态的，取决于函数的链式调用。

我觉得静态作用域比较容易。大多数语言最终都是这样，即使是Lisp（可以做到这两种，对吧？）。动态作用域就像将所有变量的引用传递给被调用函数。

一个为什么编译器不能推断出函数外部动态作用域的例子，考虑我们最后一个例子，如果我们这样写：

```c
if(/*一些条件*/)
    dummy1();
else
    dummy2();
```

调用链依赖于运行时的条件。如果为真，则调用链如下所示：

```c
dummy1() --> fun()
```

如果条件为假：

```c
dummy2() --> fun()
```

在这两种情况下，`fun`的外部作用域是调用者加上调用者的调用者，依此类推。

只需要提到C语言不允许嵌套函数或者动态作用域。

#### 另一个回答

让我们尝试最短的定义：

**词法作用域**定义了如何在嵌套函数中解析变量名：**内部函数包含父函数的作用域，即使父函数已返回**。

这就是它的全部！